<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>设计师认证-会员中心</title>
{include file="/member/m_header"}
</head>

<body>

<!--头部开始-->
{include file="/member/m_top"}
<!-- 非头尾的内容 START -->
<!--面包屑导航开始-->
<div class="breadcrumb clearfix " >
</div>
<!--面包屑导航结束-->

<div class="main clearfix" >
{include file="/member/m_left"}
    <div class="contents fr m20">
		{include file="/member/ad"}
		
		<div class="lm">
			<a class="on">设计师认证</a>
		</div>
    	<div class="border">
    	  <div class="forms">
			<form action="{:url('home/Member/memberauth_data')}" method="post">
			<div class="row">
				<span><i>* </i>真实姓名</span> <input type="text" name="true_name" id="true_name" placeholder="请输入真实姓名" />
			</div>
			<div class="row">
				<span><i>* </i>工作单位</span> <input type="text" name="work_unit" id="work_unit" placeholder="请输入工作单位" />
			</div>
			<div class="row">
				<span><i>* </i>设计师照片</span> 
				<a class="ups up_logo"><img id="finalImg" src="{$Think.config.web_member}/img/ad3.png" /></a>
				<input type="hidden" name="imgurl" id="imgurl" value="" />
			</div>
			<div class="row" >
				<span><i>* </i>身份证正反面</span> 
				<a class="ups IDcardimg_a_div"><img src="{$Think.config.web_member}/img/ad4.png" /></a>
				<input type="hidden" name="IDcardimg_a" id="IDcardimg_a" value="" />
				<input type="file" id="IDcardimg_a_file" style="display:none;" />
				
				<a class="ups IDcardimg_b_div"><img src="{$Think.config.web_member}/img/ad5.png" /></a>
				<input type="hidden" name="IDcardimg_b" id="IDcardimg_b" value="" />
				<input type="file" id="IDcardimg_b_file" style="display:none;" />
			</div>
			<div class="row" >
				<span><i>* </i>毕业证书</span> 
				<a class="ups graducerti_div"><img src="{$Think.config.web_member}/img/ad6.png" /></a>
				<input type="hidden" name="graducerti" id="graducerti" value="" />
				<input type="file" id="graducerti_file" style="display:none;" />
			</div>
			<div class="row">
				<span><i>* </i>最高学历</span> <input type="text" name="diploma" id="diploma" placeholder="您的最高学历，如本科、硕士等" />
			</div>
			<div class="row">
				<span><i>* </i>所学专业</span> <input type="text" name="major" id="major" placeholder="请输入您所学的专业" />
			</div>
			<div class="row">
				<span><i>* </i>联系电话</span> <input type="text" name="a_mobile" id="a_mobile" placeholder="请输入联系电话" />
			</div>
			<div class="row">
				<span><i>* </i>电子邮箱</span> <input type="text" name="a_email" id="a_email" placeholder="请输入电子邮箱" />
			</div>
			<div class="row">
				<span><i>* </i>联系地址</span> <input type="text" name="a_address" id="a_address" placeholder="请输入联系地址" />
			</div>
			<input type="hidden" name="cate" value="{$cate}" />
			<input type="submit" value="确认" class="submit" />
			</form>
		  </div>
		</div>
    </div>
</div>
<!-- 非头尾的内容 END -->
<script>
$(function(){
	$(".submit").click(function(){
		var _unameobj=$('#true_name');
		_uname=_unameobj.val();
		_kg=/\s+/;
		if(_uname.length<1) {
			alert('您的真实姓名不能为空！');
			_unameobj.focus();
			return false;
		}else if(_kg.test(_uname)) {
			alert('您的真实姓名不能包含空格！');
			_unameobj.focus();
			return false;
		}else if(_uname.length>50) {
			alert('您的真实姓名长度必须小于50个字符！');
			_unameobj.focus();
			return false;
		}
		if($("#work_unit").val().length<1) {
			alert('您的工作单位不能为空！');
			$("#work_unit").focus();
			return false;
		}
		if($("#imgurl").val().length<1){
			alert('请上传设计师照片！');
			return false;
		}
		if($("#IDcardimg_a").val().length<1){
			alert('请上传身份证正面！');
			return false;
		}
		if($("#IDcardimg_b").val().length<1){
			alert('请上传身份证反面！');
			return false;
		}
		if($("#graducerti").val().length<1){
			alert('请上传毕业证书！');
			return false;
		}
		if($("#diploma").val().length<1) {
			alert('您的最高学历不能为空！');
			$("#diploma").focus();
			return false;
		}
		if($("#major").val().length<1) {
			alert('您的所学专业不能为空！');
			$("#major").focus();
			return false;
		}
		var _a_mobileobj=$('#a_mobile');
		_a_mobile=_a_mobileobj.val();
		var pat_mobile = /^[0-9]{8,20}$/; 
		if(_a_mobile.length<1) {
			alert('您的联系电话不能为空！');
			_a_mobileobj.focus();
			return false;
		}else if(!pat_mobile.test(_a_mobile)) {
			alert('您的联系电话格式不正确！');
			_a_mobileobj.focus();
			return false;
		}
		var _a_emailobj=$('#a_email');
		_a_email=_a_emailobj.val();
		var pat_email = /^[\w\-\.]+@[\w\-\.]+(\.\w+)+$/; 
		if(_a_email.length<1) {
			alert('您的电子邮箱不能为空！');
			_a_emailobj.focus();
			return false;
		}else if(!pat_email.test(_a_email)) {
			alert('您的电子邮箱格式不正确！');
			_a_emailobj.focus();
			return false;
		}
		var _a_addressobj=$('#a_address');
		_a_address=_a_addressobj.val();
		if(_a_address.length<1) {
			alert('您的联系地址不能为空！');
			_a_addressobj.focus();
			return false;
		}
		return true;
	});
});
</script>
{include file="/common/uptouxiang"}
{include file="/common/upimage"}
<style>
.IDcardimg_a_div img,.IDcardimg_b_div img,.graducerti_div img{max-width:120px;}
</style>
<script>
$(function () {
	//弹出图片裁剪框
	$(".up_logo").on("click",function () {
		$(".tailoring-container").toggle();
	});
	//裁剪后的处理
	$("#sureCut").on("click",function () {
		if ($("#tailoringImg").attr("src") == null ){
			return false;
		}else{
			var cas = $('#tailoringImg').cropper('getCroppedCanvas',{width:500,height:500});//获取被裁剪后的canvas
			var base64url = cas.toDataURL('image/png'); //转换为base64地址形式
			$("#finalImg").prop("src",base64url);//显示为图片的形式
			//关闭裁剪框
			closeTailor();
			//上传到服务器
			$.post("{:url('home/Aajax/ajaxupimages')}",{imgsource:base64url,type:'auth'},function(data){
				$("#imgurl").val(data.imgurl);
				$("#finalImg").attr("src",data.imgurl);
			},"json");
		}
	});
	//上传身份证正面
	var div_idcarda = $(".IDcardimg_a_div");
	var file_idcarda = $("#IDcardimg_a_file");
	var name_idcarda = $("#IDcardimg_a");
	div_idcarda.click(function(){
		file_idcarda.attr("val","1");
		document.getElementById("IDcardimg_a_file").click(); //js触发其他标签click事件
	});
	file_idcarda.change(function () {
		let files = $(this)[0].files[0]; //获取files对象
		//参数2为按比例缩小压缩后宽高
		$.compress(files,1000).then((url)=>{
			div_idcarda.find("img").attr("src",url);
			//上传到服务器
			$.post("{:url('home/Aajax/ajaxupimages')}",{imgsource:url,type:'auth'},function(data){
				name_idcarda.val(data.imgurl);
				div_idcarda.find("img").attr("src",data.imgurl);
			},"json");
		});
	});
	//上传身份证反面
	var div_idcardb = $(".IDcardimg_b_div");
	var file_idcardb = $("#IDcardimg_b_file");
	var name_idcardb = $("#IDcardimg_b");
	div_idcardb.click(function(){
		file_idcardb.attr("val","1");
		document.getElementById("IDcardimg_b_file").click(); //js触发其他标签click事件
	});
	file_idcardb.change(function () {
		let files = $(this)[0].files[0]; //获取files对象
		//参数2为按比例缩小压缩后宽高
		$.compress(files,1000).then((url)=>{
			div_idcardb.find("img").attr("src",url);
			//上传到服务器
			$.post("{:url('home/Aajax/ajaxupimages')}",{imgsource:url,type:'auth'},function(data){
				name_idcardb.val(data.imgurl);
				div_idcardb.find("img").attr("src",data.imgurl);
			},"json");
		});
	});
	//上传毕业证书
	var div_graducerti = $(".graducerti_div");
	var file_graducerti = $("#graducerti_file");
	var name_graducerti = $("#graducerti");
	div_graducerti.click(function(){
		file_graducerti.attr("val","1");
		document.getElementById("graducerti_file").click(); //js触发其他标签click事件
	});
	file_graducerti.change(function () {
		let files = $(this)[0].files[0]; //获取files对象
		//参数2为按比例缩小压缩后宽高
		$.compress(files,1000).then((url)=>{
			div_graducerti.find("img").attr("src",url);
			//上传到服务器
			$.post("{:url('home/Aajax/ajaxupimages')}",{imgsource:url,type:'auth'},function(data){
				name_graducerti.val(data.imgurl);
				div_graducerti.find("img").attr("src",data.imgurl);
			},"json");
		});
	});
});
</script>

{include file="/member/m_footer"}

</body>
</html>
